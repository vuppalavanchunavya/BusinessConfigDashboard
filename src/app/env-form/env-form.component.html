<form [formGroup]="envForm" (ngSubmit)="onSubmit()" class="env-form">
  <div *ngFor="let group of groupedFields | keyvalue: originalOrder" class="form-group">
    <h3>{{ group.key }}</h3>
    <div class="form-row">
      <ng-container *ngIf="group.value">
        <div *ngFor="let field of group.value" class="form-field">
          <ng-container *ngIf="field.type === 'text' || field.type === 'number'">
            <label [for]="field.name" class="form-label">{{ field.name }}</label>
            <input [id]="field.name" [formControlName]="field.name" [type]="field.type" [required]="field.required"
              [placeholder]="field.placeholder" class="form-control">
            <small class="form-text text-muted">{{ field.description }} <br><b>Default Value: </b>
              <code>{{ field.defaultValue }}</code></small>
          </ng-container>

          <ng-container *ngIf="field.type === 'select'">
            <label [for]="field.name" class="form-label">{{ field.name }}</label>
            <select [id]="field.name" [formControlName]="field.name" [required]="field.required" class="form-control">
              <option *ngFor="let option of field.options" [value]="option">
                {{ option }}
              </option>
            </select>
            <small class="form-text text-muted">{{ field.description }} <br><b>Default Value: </b>
              <code>{{ field.defaultValue }}</code></small>
          </ng-container>
        </div>
      </ng-container>
    </div>
  </div>

  <button type="submit" class="btn btn-primary">Save Configuration</button>

  <pre>{{ envForm.value | json }}</pre>
</form>